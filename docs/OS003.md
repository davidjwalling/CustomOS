### Project os.003
Source: [os.003/os.asm](../os.003/os.asm)
### Features and Topics
- Projct os.003 adds the BUILDPREP directive and assembles the program osprep.com.
- The osprep.com program prompts the user to insert a formatted diskette and it copies os.dat to the boot sector.
### Source-Code Notes
- Osprep.com checks for well-known errors that can occur writing to a diskette.
- Errors are reported if encountered.
### [Virtual](VIRTUAL.md) Machine Operation
- The osprep.com program is created by make.bat or make with Makefile.
- Osprep.com will not operate on 64-bit operating systems.
- See the Physical Machine Operation below for instructions using osprep.com.

### [Physical](PHYSICAL.md) Machine Operation
- Project os.003 does not change the boot sector created in Project os.002.
- It is not necessary to update the boot sector of the physical floppy diskette any more.
- To prepare for physical machine operation using osprep.com, copy os.com and osprep.com to a bootable DOS diskette.
- Insert the bootable diskette containing osprep.com into a floppy disk drive.
- Start the system.

<img src="../images/os003_osprep_001.jpg"/>

- Here we use the DOS "dir" command to list the files on the diskette.
- Confirm that both os.com and osprep.com were copied to the diskette.

<img src="../images/os003_osprep_002.jpg"/>

- Next, we run the osprep.com as a DOS program.
- Osprep.com displays instructional text.
- Per instructions, insert a formatted diskette in drive A: on which we want os.dat written as the boot sector.

<img src="../images/os003_osprep_003.jpg"/>

- After inserting the target diskette and pressing enter, the boot sector is written to the diskette.
- A confirmation message is displayed after the boot sector is written.
- DOS will prompt to restore the DOS diskette to return to the DOS command prompt.

<img src="../images/os003_osprep_004.jpg"/>

In the next project we will extend the OS loader program, os.com, to place the CPU into protected mode.
